<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Codescreens</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
    [v-cloak] {
        display: none;
    }
    .input {
        padding: 15px 0;
    }
    @media (min-width: 0) {
        .columns {
            list-style: none;
            padding: 0;
            columns: 1;
        }
    }
    @media (min-width: 768px) {
        .columns {
            list-style: none;
            padding: 0;
            columns: 2;
        }
    }
    @media (min-width: 1200px) {
        .columns {
            list-style: none;
            padding: 0;
            columns: 3;
        }
    }

/* https://getbootstrap.com/docs/4.1/examples/sticky-footer/sticky-footer.css */
/* Sticky footer styles
-------------------------------------------------- */
html {
  position: relative;
  min-height: 100%;
}
body {
  margin-bottom: 60px; /* Margin bottom by footer height */
  margin-bottom: 80px; /* Margin bottom by footer height */
}
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 60px; /* Set the fixed height of the footer here */
  line-height: 60px; /* Vertically center the text there */
  background-color: #f5f5f5;
}
    </style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136791937-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-136791937-1');
</script>
</head>
<body>

<a href="https://github.com/vbarbarosh/codescreens" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<br>

<div v-cloak id="app" class="container">

    <h2 class="text-muted">
        Codescreens &mdash; elegant solutions of day-to-day coding problems
    </h2>

    <p class="input sticky-top">
        <input ref="input" v-model="search" class="form-control">
    </p>

    <ul class="columns">
        <li v-for="match in codescreens_matches">
            <a v-bind:href="match.cs.gist_url"><span v-for="part in match.parts" v-bind:class="{'alert-success': part.is_kv}">{{ part.str }}</span></a>
        </li>
    </ul>

</div>

<footer class="footer">
    <div class="container">
        <a href="https://www.instagram.com/codescreens">instagram</a>
        |
        <a href="https://www.facebook.com/codescreens">facebook</a>
        |
        <a href="https://www.vk.com/codescreens">vk</a>
        |
        <a href="mailto:hello@codescreens.com">email</a>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.8/vue.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.5.3/bluebird.min.js"></script>

<script>
(function () {

    const app = new Vue({
        el: '#app',
        data: {
            search: '',
            codescreens: [
                {name: 'app_fontmerge', gist_url: 'https://git.io/fjBj0'},
                {name: 'app_svgbbox', gist_url: 'https://git.io/fjBlv'},
                {name: 'app_svgtext', gist_url: 'https://git.io/fjBDu'},
                {name: 'chartjs', gist_url: 'https://git.io/fjzGq'},
                {name: 'js_gotcha_string_replace', gist_url: 'https://git.io/fjkny'},
                {name: 'js_html_escape', gist_url: 'https://git.io/fjIvN'},
                {name: 'js_pager_numerate_ellipsis', gist_url: 'https://git.io/fjlNy'},
                {name: 'js_pager_numerate_google', gist_url: 'https://git.io/fjWZ1'},
                {name: 'js_range', gist_url: 'https://git.io/fjI5w'},
                {name: 'js_regex_escape', gist_url: 'https://git.io/fjIBx'},
                {name: 'math_rotate', gist_url: 'https://git.io/fjEJj'},
                {name: 'math_scale', gist_url: 'https://git.io/fjEuw'},
                {name: 'node_buffer', gist_url: 'https://git.io/fjR3u'},
                {name: 'node_promise_promisify', gist_url: 'https://git.io/fj0cq'},
                {name: 'node_promise_then', gist_url: 'https://git.io/fjRaE'},
                {name: 'php_array_merge', gist_url: 'https://git.io/fjTVn'},
                {name: 'php_class_clone_alt', gist_url: 'https://git.io/fj4bY'},
                {name: 'php_class_ctor_parent', gist_url: 'https://git.io/fj4zp'},
                {name: 'php_function_alias', gist_url: 'https://git.io/fjLdA'},
                {name: 'php_function_options', gist_url: 'https://git.io/fjtgd'},
                {name: 'php_function_scope', gist_url: 'https://git.io/fjtFm'},
                {name: 'php_templ_cli', gist_url: 'https://gist.github.com/6a869804adafcaed93ea88da54a011b4'},
                {name: 'php_uuid', gist_url: 'https://git.io/fjtIj'},
                {name: 'shell_awk_parse_columns', gist_url: 'https://git.io/fjmUq'},
                {name: 'shell_awk_parse_ssh_config', gist_url: 'https://git.io/fjml0'},
                {name: 'shell_bash_jobs_fg', gist_url: 'https://git.io/fj4Tm'},
                {name: 'shell_bash_lines_wrap', gist_url: 'https://git.io/fjTNV'},
                {name: 'shell_bash_range', gist_url: 'https://gist.github.com/fb6d8b3637b8d65ad23ff9dfb3d2adf1'},
                {name: 'shell_bash_spawn_wait', gist_url: 'https://git.io/fjqZ0'},
                {name: 'shell_bash_vars_exists', gist_url: 'https://git.io/fjkXg'},
                {name: 'shell_curl_auth', gist_url: 'https://git.io/fjZxP'},
                {name: 'shell_curl_get', gist_url: 'https://git.io/fjn34'},
                {name: 'shell_curl_head', gist_url: 'https://git.io/fjnux'},
                {name: 'shell_curl_headers', gist_url: 'https://git.io/fjn1R'},
                {name: 'shell_curl_options', gist_url: 'https://git.io/fjnjh'},
                {name: 'shell_curl_pipe', gist_url: 'https://git.io/fjcuh'},
                {name: 'shell_curl_post_javascript', gist_url: 'https://git.io/fjcbm'},
                {name: 'shell_curl_post_json', gist_url: 'https://git.io/fjCiK'},
                {name: 'shell_curl_post_multipart', gist_url: 'https://git.io/fjWex'},
                {name: 'shell_curl_post_multipart_detailed', gist_url: 'https://git.io/fj8GG'},
                {name: 'shell_curl_post_put_patch_delete', gist_url: 'https://git.io/fj8uC'},
                {name: 'shell_curl_post_urlencoded', gist_url: 'https://git.io/fjCGe'},
                {name: 'shell_curl_post_urlencoded_unsafe', gist_url: 'https://git.io/fjlaY'},
                {name: 'shell_docker_adminer', gist_url: 'https://gist.github.com/f07a7a1529fa37a78878a0db193ca91c'},
                {name: 'shell_docker_browserless', gist_url: 'https://git.io/fjLsL'},
                {name: 'shell_docker_browserless_debug', gist_url: 'https://git.io/fjOEX'},
                {name: 'shell_docker_browserless_htmlpdf', gist_url: 'https://git.io/fjLwp'},
                {name: 'shell_docker_browserless_markdownpdf', gist_url: 'https://git.io/fjOme'},
                {name: 'shell_docker_browserless_parse_showmyip', gist_url: 'https://git.io/fjYSw'},
                {name: 'shell_docker_browserless_screencast', gist_url: 'https://git.io/fjY01'},
                {name: 'shell_escape_html', gist_url: 'https://git.io/fjqM6'},
                {name: 'shell_ffmpeg_templ', gist_url: 'https://git.io/fjZV0'},
                {name: 'shell_files_list', gist_url: 'https://git.io/fjWX9'},
                {name: 'shell_files_truncate', gist_url: 'https://git.io/fjlL7'},
                {name: 'shell_find', gist_url: 'https://gist.github.com/2c8b7d87ee1fa0338ae07bff4db2b706'},
                {name: 'shell_generate_passwords', gist_url: 'https://git.io/fjZTD'},
                {name: 'shell_imagemagick_thumbnails', gist_url: 'https://gist.github.com/b147da1610a3c173b58e444355d249a3'},
                {name: 'shell_lines_count', gist_url: 'https://git.io/fjmwx'},
                {name: 'shell_lines_head', gist_url: 'https://git.io/fj3lE'},
                {name: 'shell_lines_prefix_time', gist_url: 'https://git.io/fjmpy'},
                {name: 'shell_lines_reverse', gist_url: 'https://git.io/fjs2w'},
                {name: 'shell_lines_shuffle', gist_url: 'https://git.io/fjGW1'},
                {name: 'shell_lines_skip', gist_url: 'https://git.io/fj3SX'},
                {name: 'shell_lines_slice', gist_url: 'https://git.io/fjsL5'},
                {name: 'shell_lines_tail', gist_url: 'https://git.io/fjsQB'},
                {name: 'shell_lines_unique', gist_url: 'https://git.io/fjGIj'},
                {name: 'shell_number_thousands', gist_url: 'https://git.io/fjOyW'},
                {name: 'shell_pipe_progress', gist_url: 'https://git.io/fjGDZ'},
                {name: 'shell_templ', gist_url: 'https://gist.github.com/ef717e6ef54e5e51d6f668c4ce089c1d'},
                {name: 'shell_templ_prefix', gist_url: 'https://git.io/fj3ej'},
                {name: 'shell_youtube', gist_url: 'https://gist.github.com/76ca966be71aebacf3b88fe027c8112d'},
                {name: 'svg_coords', gist_url: 'https://git.io/fjuHs'},
                {name: 'svg_pattern_dots', gist_url: 'https://git.io/fjzwl'},
            ],
        },
        computed: {
            keywords: function () {
                const tmp = {};
                this.search.toLowerCase().split(/\s+/)
                    .forEach(v => v && (tmp[v] = true));
                return Object.keys(tmp);
            },
            codescreens_matches: function () {
                const keywords = this.keywords;
                return this.codescreens.map(function (cs) {
                    const parts = str_split_kv(cs.name, keywords);
                    const tmp = {};
                    parts.forEach(v => v.is_kv && (tmp[v.str] = true));
                    if (Object.keys(tmp).length == keywords.length) {
                        return {parts, cs};
                    }
                    return false;
                }).filter(v => v);
            }
        },
        methods: {
            focus: function () {
                if (document.activeElement !== this.$refs.input) {
                    this.$refs.input.select();
                }
                this.$refs.input.focus();
            },
        },
        created: function () {
            const _this = this;
            jQuery(window).on('keydown', function (event) {
                if (event.which != 9 && event.which != 13) {
                    _this.focus();
                }
            })
        },
        mounted: function () {
            this.focus();
        }
    });

    // https://stackoverflow.com/a/3561711/1478566
    function regex_escape(s)
    {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    function str_split_kv(str, keywords)
    {
        if (keywords.length == 0) {
            return [{str, is_kv: false}];
        }
        const re = new RegExp(`(${keywords.map(regex_escape).join('|')})`, 'g');
        return str.split(re).filter(s => s).map(function (s) {
            return {str: s, is_kv: keywords.includes(s)};
        });
    }

})();
</script>

</body>
</html>
